(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d4f5ed6"],{1276:function(e,t,n){"use strict";var r=n("d784"),a=n("44e7"),o=n("825a"),i=n("1d80"),c=n("4840"),s=n("8aa5"),l=n("50c4"),u=n("14c3"),d=n("9263"),p=n("d039"),h=[].push,f=Math.min,v=4294967295,g=!p((function(){return!RegExp(v,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(i(this)),o=void 0===n?v:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!a(e))return t.call(r,e,o);var c,s,l,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=new RegExp(e.source,p+"g");while(c=d.call(g,r)){if(s=g.lastIndex,s>f&&(u.push(r.slice(f,c.index)),c.length>1&&c.index<r.length&&h.apply(u,c.slice(1)),l=c[0].length,f=s,u.length>=o))break;g.lastIndex===c.index&&g.lastIndex++}return f===r.length?!l&&g.test("")||u.push(""):u.push(r.slice(f)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=i(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,a,n):r.call(String(a),t,n)},function(e,a){var i=n(r,e,this,a,r!==t);if(i.done)return i.value;var d=o(e),p=String(this),h=c(d,RegExp),x=d.unicode,y=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),m=new h(g?d:"^(?:"+d.source+")",y),k=void 0===a?v:a>>>0;if(0===k)return[];if(0===p.length)return null===u(m,p)?[p]:[];var R=0,b=0,E=[];while(b<p.length){m.lastIndex=g?b:0;var _,w=u(m,g?p:p.slice(b));if(null===w||(_=f(l(m.lastIndex+(g?0:b)),p.length))===R)b=s(p,b,x);else{if(E.push(p.slice(R,b)),E.length===k)return E;for(var S=1;S<=w.length-1;S++)if(E.push(w[S]),E.length===k)return E;b=R=_}}return E.push(p.slice(R)),E}]}),!g)},"14c3":function(e,t,n){var r=n("c6b6"),a=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"3bca":function(e,t,n){},"44e7":function(e,t,n){var r=n("861d"),a=n("c6b6"),o=n("b622"),i=o("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},9263:function(e,t,n){"use strict";var r=n("ad6d"),a=n("9f7f"),o=RegExp.prototype.exec,i=String.prototype.replace,c=o,s=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=s||u||l;d&&(c=function(e){var t,n,a,c,d=this,p=l&&d.sticky,h=r.call(d),f=d.source,v=0,g=e;return p&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),g=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(f="(?: "+f+")",g=" "+g,v++),n=new RegExp("^(?:"+f+")",h)),u&&(n=new RegExp("^"+f+"$(?!\\s)",h)),s&&(t=d.lastIndex),a=o.call(p?n:d,g),p?a?(a.input=a.input.slice(v),a[0]=a[0].slice(v),a.index=d.lastIndex,d.lastIndex+=a[0].length):d.lastIndex=0:s&&a&&(d.lastIndex=d.global?a.index+a[0].length:t),u&&a&&a.length>1&&i.call(a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a}),e.exports=c},"9f7f":function(e,t,n){"use strict";var r=n("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,n){"use strict";var r=n("23e7"),a=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},b4c9:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"mainContainer",staticStyle:{width:"100%",height:"100vh","background-color":"#f7f8fa"}},[n("div",{ref:"searchInputContainer"},[n("van-search",{staticClass:"search-input",attrs:{background:"#4fc08d",shape:"round",clearable:!1,placeholder:"请输入搜索关键词","input-align":"center"},on:{search:e.onSearch},scopedSlots:e._u([{key:"left-icon",fn:function(){return[n("van-icon",{staticStyle:{"font-size":"16px","padding-right":"10px"},attrs:{name:"search"}})]},proxy:!0},{key:"right-icon",fn:function(){return[n("van-icon",{staticStyle:{"font-size":"16px","padding-right":"10px"},attrs:{name:"records"},on:{click:e.onShowPopover}})]},proxy:!0}]),model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),e.showPopover?n("div",{staticClass:"search-history"},[e._l(e.searchKeywordsList,(function(t){return n("van-cell",{key:t,attrs:{title:t},on:{click:function(n){return e.onChosenSearchKey(t)}}})})),n("van-icon",{staticStyle:{padding:"10px"},attrs:{name:"delete"},on:{click:e.onClearSearchHistory}})],2):e._e(),n("div",[n("van-tabs",{attrs:{animated:"",swipeable:"",color:"#4fc08d","title-active-color":"#4fc08d",sticky:""}},[n("van-tab",{ref:"okRescTab",attrs:{title:"OK资源网"},on:{click:function(e){return this.$toast.success("sasa")}}},[n("van-list",{staticStyle:{padding:"5px","background-color":"#f7f8fa"},attrs:{"immediate-check":!1,finished:e.okResc.finished,offset:10,"finished-text":"没有更多了"},on:{load:e.onLoadOkRescList},model:{value:e.okResc.loading,callback:function(t){e.$set(e.okResc,"loading",t)},expression:"okResc.loading"}},e._l(e.okResc.tableData.list,(function(t,r){return n("span",{key:r,staticStyle:{display:"block","text-align":"center",padding:"10px",color:"grey"},on:{click:function(n){return e.onOkRescDetail(t)}}},[e._v(" "+e._s(t.vod_name+"-"+t.type_name)+" ")])})),0)],1)],1)],1)])},a=[],o=(n("c975"),n("ac1f"),n("1276"),n("b85c")),i=n("2909"),c=(n("96cf"),n("1da1")),s={name:"SearchMovie",data:function(){return{keywords:"",showPopover:!1,activeTab:0,mainContainer:null,searchKeywordsList:[],searchInputContainer:null,okRescTab:null,okResc:{tableData:"",loading:!1,finished:!0,searchPageParams:{ac:"list",wd:this.keywords,t:null,pg:1}}}},methods:{onSearch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.keywords){t.next=2;break}return t.abrupt("return");case 2:return e.rememberSearchKeywords(),t.next=5,e.onSearchOk();case 5:case"end":return t.stop()}}),t)})))()},rememberSearchKeywords:function(){if(this.keywords){var e=this.$cacheUtil.LOCAL_STORAGE.get(this.$cacheConstant.SEARCH.KEY_SEARCH_KEYWORDS);e||(e=[]),-1===e.indexOf(this.keywords)&&(10<=e.length&&e.pop(),e.unshift(this.keywords),this.$cacheUtil.LOCAL_STORAGE.set(this.$cacheConstant.SEARCH.KEY_SEARCH_KEYWORDS,e))}},onShowPopover:function(){var e=this.$cacheUtil.LOCAL_STORAGE.get(this.$cacheConstant.SEARCH.KEY_SEARCH_KEYWORDS);e?(this.searchKeywordsList=e,this.showPopover=!this.showPopover):this.$toast.fail("还没有历史数据记录")},onChosenSearchKey:function(e){this.showPopover=!1,e&&(this.keywords=e,this.onSearch())},onSearchOk:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.okResc.searchPageParams.wd=t.keywords,n.next=3,t.$httpUtil.http(t.$httpApi.SERVICE.OK.page,t.okResc.searchPageParams);case 3:r=n.sent,r?e?(a=t.okResc.tableData.list).push.apply(a,Object(i["a"])(r.list)):t.okResc.tableData=r:t.okResc.finished=!0,t.okResc.loading=!1,t.okResc.searchPageParams.pg>=r.pagecount?t.okResc.finished=!0:t.okResc.finished=!1;case 7:case"end":return n.stop()}}),n)})))()},onLoadOkRescList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.okResc.searchPageParams.pg<e.okResc.tableData.pagecount)){t.next=4;break}return e.okResc.searchPageParams.pg=e.okResc.searchPageParams.pg+1,t.next=4,e.onSearchOk(!0);case 4:case"end":return t.stop()}}),t)})))()},onOkRescDetail:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,i,c,s,l,u,d,p,h,f,v,g,x,y,m,k,R,b,E,_,w,S,O,P,C,$,I,A;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$httpUtil.http(t.$httpApi.SERVICE.OK.detail,{ac:"detail",ids:e.vod_id});case 2:r=n.sent,1!==r.code&&t.$toast.fail("请求失败！"),a=[],i=Object(o["a"])(r.list);try{for(i.s();!(c=i.n()).done;){for(s=c.value,l={},l.vodId=s.vod_id,l.vodName=s.vod_name,l.vodClass=s.vod_class,l.vodPic=s.vod_pic,l.vodActor=s.vod_actor,l.vodBlurb=s.vod_blurb,l.vodRemarks=s.vod_remarks,l.vodArea=s.vod_area,l.vodLang=s.vod_lang,l.vodYear=s.vod_year,l.vodTime=s.vod_time,l.vodContent=s.vod_content,l.vodPlayFrom=s.vod_play_from,l.vodPlayServer=s.vod_play_server,l.typeName=s.type_name,l.isCollected=!1,u=s.vod_play_from,d=s.vod_play_note,p=s.vod_play_url.split(d),h=u.split(d),l.playVOList=[],f=0;f<p.length;f++){v=h[f],-1<v.indexOf("m3u8")&&(v="m3u8"),g={},g.vodPlayFrom=v,x=[],y=Object(o["a"])(p[f].split("#"));try{for(y.s();!(m=y.n()).done;)k=m.value,R={},b=k.split("$"),R.vodPlayFrom=v,R.playName=b[0],R.playUrl=b[1],x.push(R)}catch(L){y.e(L)}finally{y.f()}g.playDetailVOList=x,l.rescPlatform="ok",l.rescPlatformDesc="ok资源网",l.playVOList.push(g)}a.push(l)}}catch(L){i.e(L)}finally{i.f()}return E=a[0],n.next=10,t.$dexieUtil.getInstance().play_collection.where("vodName").equals(E.vodName).and((function(e){return e.rescPlatform===E.rescPlatform})).and((function(e){return e.vodId===E.vodId})).count();case 10:_=n.sent,0<_&&(E.isCollected=!0),t.$store.commit("updateMovieVOList",a),t.$store.commit("updateRightNowMovieVO",a[0]),w=a[0].playVOList[0].playDetailVOList[0],S=Object(o["a"])(a[0].playVOList),n.prev=16,S.s();case 18:if((O=S.n()).done){n.next=40;break}P=O.value,C=Object(o["a"])(P.playDetailVOList),n.prev=21,C.s();case 23:if(($=C.n()).done){n.next=30;break}if(I=$.value,!(-1<I.playUrl.indexOf("m3u8")||-1<I.playUrl.indexOf("mp4"))){n.next=28;break}return w=I,n.abrupt("break",30);case 28:n.next=23;break;case 30:n.next=35;break;case 32:n.prev=32,n.t0=n["catch"](21),C.e(n.t0);case 35:return n.prev=35,C.f(),n.finish(35);case 38:n.next=18;break;case 40:n.next=45;break;case 42:n.prev=42,n.t1=n["catch"](16),S.e(n.t1);case 45:return n.prev=45,S.f(),n.finish(45);case 48:return t.$store.commit("updateRightNowMovieDetailVO",w),n.next=51,t.$dexieUtil.getInstance().play_history.where("vodName").equals(E.vodName).and((function(e){return e.vodId===E.vodId})).and((function(e){return e.rescPlatform===E.rescPlatform})).count();case 51:if(A=n.sent,0!==A){n.next=56;break}return E.createTime=t.$dayjs().format("YYYY-MM-DD HH:mm:ss"),n.next=56,t.$dexieUtil.getInstance().play_history.add(E);case 56:return n.next=58,t.$router.push("/Play");case 58:case"end":return n.stop()}}),n,null,[[16,42,45,48],[21,32,35,38]])})))()},onClearSearchHistory:function(){this.$cacheUtil.LOCAL_STORAGE.remove(this.$cacheConstant.SEARCH.KEY_SEARCH_KEYWORDS),this.$toast.success("清除成功！"),this.showPopover=!1}}},l=s,u=(n("bb75"),n("2877")),d=Object(u["a"])(l,r,a,!1,null,"20c4da64",null);t["default"]=d.exports},bb75:function(e,t,n){"use strict";n("3bca")},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),a=n("d039"),o=n("b622"),i=n("9263"),c=n("9112"),s=o("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=o("replace"),p=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),h=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var f=o(e),v=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),g=v&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[s]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!v||!g||"replace"===e&&(!l||!u||p)||"split"===e&&!h){var x=/./[f],y=n(f,""[e],(function(e,t,n,r,a){return t.exec===i?v&&!a?{done:!0,value:x.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),m=y[0],k=y[1];r(String.prototype,e,m),r(RegExp.prototype,f,2==t?function(e,t){return k.call(e,this,t)}:function(e){return k.call(e,this)})}d&&c(RegExp.prototype[f],"sham",!0)}}}]);